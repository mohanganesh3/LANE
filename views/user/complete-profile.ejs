<%- include('../partials/header') %>

<div class="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-primary rounded-full mb-4">
                <i class="fas fa-user-circle text-3xl text-white"></i>
            </div>
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Complete Your Rider Profile</h1>
            <p class="text-lg text-gray-600">Let's get your vehicle details to start offering rides</p>
        </div>

        <!-- Progress Steps -->
        <div class="mb-8">
            <div class="flex items-center justify-center space-x-4">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold">
                        <i class="fas fa-check"></i>
                    </div>
                    <span class="ml-2 text-sm font-medium text-gray-700">Account Created</span>
                </div>
                <div class="w-16 h-1 bg-primary"></div>
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold">
                        2
                    </div>
                    <span class="ml-2 text-sm font-medium text-gray-700">Vehicle Details</span>
                </div>
                <div class="w-16 h-1 bg-gray-300"></div>
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold">
                        3
                    </div>
                    <span class="ml-2 text-sm font-medium text-gray-500">Documents</span>
                </div>
            </div>
        </div>

        <!-- Form Card -->
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <form id="profileForm" action="/user/complete-profile" method="POST">
                <!-- Vehicle Information -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i class="fas fa-car text-primary mr-3"></i>
                        Vehicle Information
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Vehicle Type -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Vehicle Type <span class="text-red-500">*</span>
                            </label>
                            <select name="vehicleType" required 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="">Select vehicle type</option>
                                <option value="SEDAN">Sedan</option>
                                <option value="SUV">SUV</option>
                                <option value="HATCHBACK">Hatchback</option>
                                <option value="MPV">MPV (Multi-Purpose Vehicle)</option>
                                <option value="VAN">Van</option>
                                <option value="LUXURY">Luxury Car</option>
                                <option value="MOTORCYCLE">Motorcycle</option>
                                <option value="AUTO">Auto/Rickshaw</option>
                            </select>
                        </div>

                        <!-- Vehicle Make -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Make (Brand) <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="make" required placeholder="e.g., Toyota, Honda, Maruti"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- Vehicle Model -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Model <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="model" required placeholder="e.g., Camry, City, Swift"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- Year -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Year <span class="text-red-500">*</span>
                            </label>
                            <input type="number" name="year" required min="1990" max="2025" placeholder="2020"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- Color -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Color <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="color" required placeholder="e.g., White, Black, Silver"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- License Plate -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                License Plate Number <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="licensePlate" required placeholder="KA01AB1234"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent uppercase">
                        </div>

                        <!-- Seating Capacity -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Seating Capacity <span class="text-red-500">*</span>
                            </label>
                            <input type="number" name="capacity" required min="1" max="8" placeholder="4"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- AC Available -->
                        <div class="flex items-center">
                            <input type="checkbox" name="acAvailable" id="acAvailable"
                                   class="w-5 h-5 text-primary focus:ring-primary border-gray-300 rounded">
                            <label for="acAvailable" class="ml-3 text-sm font-medium text-gray-700">
                                Air Conditioning Available
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Riding Preferences -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i class="fas fa-sliders-h text-primary mr-3"></i>
                        Riding Preferences
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Gender Preference -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Gender Preference for Passengers
                            </label>
                            <select name="genderPreference"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="ANY">Any</option>
                                <option value="MALE_ONLY">Male Only</option>
                                <option value="FEMALE_ONLY">Female Only</option>
                                <option value="MIXED">Mixed</option>
                            </select>
                        </div>

                        <!-- Music Preference -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Music Preference
                            </label>
                            <select name="musicPreference"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="NO_MUSIC">No Music</option>
                                <option value="LIGHT_MUSIC">Light Music</option>
                                <option value="OPEN_TO_REQUESTS">Open to Requests</option>
                            </select>
                        </div>

                        <!-- Smoking -->
                        <div class="flex items-center">
                            <input type="checkbox" name="smokingAllowed" id="smokingAllowed"
                                   class="w-5 h-5 text-primary focus:ring-primary border-gray-300 rounded">
                            <label for="smokingAllowed" class="ml-3 text-sm font-medium text-gray-700">
                                Smoking Allowed
                            </label>
                        </div>

                        <!-- Pets -->
                        <div class="flex items-center">
                            <input type="checkbox" name="petsAllowed" id="petsAllowed"
                                   class="w-5 h-5 text-primary focus:ring-primary border-gray-300 rounded">
                            <label for="petsAllowed" class="ml-3 text-sm font-medium text-gray-700">
                                Pets Allowed
                            </label>
                        </div>
                    </div>
                </div>

                <!-- License Information -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i class="fas fa-id-card text-primary mr-3"></i>
                        Driver's License Information
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- License Number -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                License Number <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="licenseNumber" required placeholder="DL1420110012345"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent uppercase">
                        </div>

                        <!-- License Expiry -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                License Expiry Date <span class="text-red-500">*</span>
                            </label>
                            <input type="date" name="licenseExpiry" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Bio -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i class="fas fa-info-circle text-primary mr-3"></i>
                        About You
                    </h2>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Bio / Description
                        </label>
                        <textarea name="bio" rows="4" placeholder="Tell passengers a bit about yourself and your riding style..."
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                        <p class="mt-2 text-sm text-gray-500">This helps passengers feel comfortable riding with you.</p>
                    </div>
                </div>

                <!-- Important Note -->
                <div class="mb-8 bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-blue-500 text-xl"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-blue-700">
                                <strong>Next Step:</strong> After completing this form, you'll need to upload your vehicle documents (RC, Insurance, Driver's License) for verification before you can start offering rides.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex items-center justify-between pt-6 border-t border-gray-200">
                    <a href="/user/dashboard" class="text-gray-600 hover:text-gray-800 font-medium">
                        <i class="fas fa-arrow-left mr-2"></i>
                        Skip for Now
                    </a>
                    <button type="submit" 
                            class="bg-primary hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg transition duration-200 flex items-center">
                        Continue
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </form>
        </div>

        <!-- Help Section -->
        <div class="mt-8 text-center">
            <p class="text-sm text-gray-600">
                Need help? <a href="/help" class="text-primary hover:underline font-medium">Contact Support</a>
            </p>
        </div>
    </div>
</div>

<script>
    // Form validation
    const form = document.getElementById('profileForm');
    
    form.addEventListener('submit', function(e) {
        const licensePlate = document.querySelector('input[name="licensePlate"]');
        const licenseNumber = document.querySelector('input[name="licenseNumber"]');
        
        // Convert to uppercase
        if (licensePlate) licensePlate.value = licensePlate.value.toUpperCase();
        if (licenseNumber) licenseNumber.value = licenseNumber.value.toUpperCase();
        
        // Validate license expiry is in future
        const licenseExpiry = document.querySelector('input[name="licenseExpiry"]');
        if (licenseExpiry && new Date(licenseExpiry.value) <= new Date()) {
            e.preventDefault();
            alert('License expiry date must be in the future');
            return false;
        }
    });

    // Auto-uppercase for license fields
    document.querySelector('input[name="licensePlate"]').addEventListener('input', function(e) {
        e.target.value = e.target.value.toUpperCase();
    });

    document.querySelector('input[name="licenseNumber"]').addEventListener('input', function(e) {
        e.target.value = e.target.value.toUpperCase();
    });
</script>

<%- include('../partials/footer') %>
